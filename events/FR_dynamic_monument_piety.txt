namespace = FR_dynamic_monument_piety_events

country_event = {
	id = FR_dynamic_monument_piety_events.1
	
	is_triggered_only = yes

	trigger = {
		has_ruler_flag = FR_dynamic_monument_piety
	}

	hidden = yes

	immediate = {

		# has hagia_sophia

		if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = hagia_sophia
						tier = 2
					}
				}
			}

			add_ruler_modifier = {
				name = "hagia_sophia_2_dynamic_piety"
				duration = -1
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = hagia_sophia
						tier = 3
					}
				}
			}

			if = {
				# When a ruler constructs the tier 3
				limit = {
					has_ruler_modifier = hagia_sophia_2_dynamic_piety
				}

				add_ruler_modifier = {
					name = "hagia_sophia_2_3_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "hagia_sophia_3_dynamic_piety"
					duration = -1
				}
			}
		}

		# has taj_mahal

		if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = taj_mahal
						tier = 1
					}
				}
			}

			add_ruler_modifier = {
				name = "taj_mahal_1_dynamic_piety"
				duration = -1
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = taj_mahal
						tier = 2
					}
				}
			}

			if = {
				# When a ruler constructs the tier 1
				limit = {
					has_ruler_modifier = taj_mahal_1_dynamic_piety
				}

				add_ruler_modifier = {
					name = "taj_mahal_1_2_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "taj_mahal_2_dynamic_piety"
					duration = -1
				}
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = taj_mahal
						tier = 3
					}
				}
			}

			if = {
				# When a ruler constructs the tier 2
				limit = {
					OR = {
						has_ruler_modifier = taj_mahal_2_dynamic_piety
						has_ruler_modifier = taj_mahal_1_2_dynamic_piety
					}
				}

				add_ruler_modifier = {
					name = "taj_mahal_2_3_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "taj_mahal_3_dynamic_piety"
					duration = -1
				}
			}
		}

		# has registan_square

		if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = registan_square
						tier = 1
					}
				}
			}

			add_ruler_modifier = {
				name = "registan_square_1_dynamic_piety"
				duration = -1
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = registan_square
						tier = 2
					}
				}
			}

			if = {
				# When a ruler constructs the tier 1
				limit = {
					has_ruler_modifier = registan_square_1_dynamic_piety
				}

				add_ruler_modifier = {
					name = "registan_square_1_2_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "registan_square_2_dynamic_piety"
					duration = -1
				}
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = registan_square
						tier = 3
					}
				}
			}

			if = {
				# When a ruler constructs the tier 2
				limit = {
					OR = {
						has_ruler_modifier = registan_square_2_dynamic_piety
						has_ruler_modifier = registan_square_1_2_dynamic_piety
					}
				}

				add_ruler_modifier = {
					name = "registan_square_2_3_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "registan_square_3_dynamic_piety"
					duration = -1
				}
			}
		}

		# has holy_city_kairouan

		if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = holy_city_kairouan
						tier = 1
					}
				}
			}

			add_ruler_modifier = {
				name = "holy_city_kairouan_1_dynamic_piety"
				duration = -1
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = holy_city_kairouan
						tier = 2
					}
				}
			}

			if = {
				# When a ruler constructs the tier 1
				limit = {
					has_ruler_modifier = holy_city_kairouan_1_dynamic_piety
				}

				add_ruler_modifier = {
					name = "holy_city_kairouan_1_2_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "holy_city_kairouan_2_dynamic_piety"
					duration = -1
				}
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = holy_city_kairouan
						tier = 3
					}
				}
			}

			if = {
				# When a ruler constructs the tier 2
				limit = {
					OR = {
						has_ruler_modifier = holy_city_kairouan_2_dynamic_piety
						has_ruler_modifier = holy_city_kairouan_1_2_dynamic_piety
					}
				}

				add_ruler_modifier = {
					name = "holy_city_kairouan_2_3_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "holy_city_kairouan_3_dynamic_piety"
					duration = -1
				}
			}
		}

		# has imam_hussein_al-abbas

		if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = imam_hussein_al-abbas
						tier = 1
					}
				}
			}

			add_ruler_modifier = {
				name = "imam_hussein_al-abbas_1_dynamic_piety"
				duration = -1
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = imam_hussein_al-abbas
						tier = 2
					}
				}
			}

			if = {
				# When a ruler constructs the tier 1
				limit = {
					has_ruler_modifier = imam_hussein_al-abbas_1_dynamic_piety
				}

				add_ruler_modifier = {
					name = "imam_hussein_al-abbas_1_2_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "imam_hussein_al-abbas_2_dynamic_piety"
					duration = -1
				}
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					has_great_project = {
						type = imam_hussein_al-abbas
						tier = 3
					}
				}
			}

			if = {
				# When a ruler constructs the tier 2
				limit = {
					OR = {
						has_ruler_modifier = imam_hussein_al-abbas_2_dynamic_piety
						has_ruler_modifier = imam_hussein_al-abbas_1_2_dynamic_piety
					}
				}

				add_ruler_modifier = {
					name = "imam_hussein_al-abbas_2_3_dynamic_piety"
					duration = -1
				}
			}
			else = {
				add_ruler_modifier = {
					name = "imam_hussein_al-abbas_3_dynamic_piety"
					duration = -1
				}
			}
		}

	}

	option = {
		name = FR_dynamic_monument_piety_events.1.option.a
		ai_chance = { factor = 100 }
	}
}