namespace = FR_reform_repair_events 

country_event = {
	id = FR_reform_repair_events.1
	title = FR_reform_repair_events.1.title
	desc = FR_reform_repair_events.1.description
	
	is_triggered_only = yes
	
	option = {
		name = FR_reform_repair_events.1.option.init
		trigger = {
			NOT = {
				OR = {
					has_global_flag = FR_reform_repair_events_annual
					has_global_flag = FR_reform_repair_events_started
				}
			}
		}

		set_global_flag = FR_reform_repair_events_annual
		every_country = {
			country_event = {
				id = FR_reform_repair_events.2
				days = 1
			}
		}
	}
	
	option = {
		name = FR_reform_repair_events.1.option.remove
		trigger = {
			has_global_flag = FR_reform_repair_events_annual
		}
		clr_global_flag = FR_reform_repair_events_annual
	}

	option = {
		name = FR_reform_repair_events.1.option.exit
		ai_chance = { factor = 100 }
	}
}

country_event = {
	id = FR_reform_repair_events.2 
	title = FR_reform_repair_events.2.title
	desc = FR_reform_repair_events.2.description

	hidden = yes
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = FR_reform_repair_events_annual
				}

				country_event = {
					id = FR_reform_repair_events.2
					days = 365
				}
				set_global_flag = FR_reform_repair_events_started
			}
			else_if = {
				limit = {
					has_global_flag = FR_reform_repair_events_started
					ai = no
				}

				clr_global_flag = FR_reform_repair_events_started
				country_event = {
					id = FR_reform_repair_events.1
				}
			}

			if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.05
					}
				}
				change_government_reform_progress = 1
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.15
					}
				}
				change_government_reform_progress = 2
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.25
					}
				}
				change_government_reform_progress = 3
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.35
					}
				}
				change_government_reform_progress = 4
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.45
					}
				}
				change_government_reform_progress = 5
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.55
					}
				}
				change_government_reform_progress = 6
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.65
					}
				}
				change_government_reform_progress = 7
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.75
					}
				}
				change_government_reform_progress = 8
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.85
					}
				}
				change_government_reform_progress = 9
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.95
					}
				}
				change_government_reform_progress = 10
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.105
					}
				}
				change_government_reform_progress = 11
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.115
					}
				}
				change_government_reform_progress = 12
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.125
					}
				}
				change_government_reform_progress = 13
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.135
					}
				}
				change_government_reform_progress = 14
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.145
					}
				}
				change_government_reform_progress = 15
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.155
					}
				}
				change_government_reform_progress = 16
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.165
					}
				}
				change_government_reform_progress = 17
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.175
					}
				}
				change_government_reform_progress = 18
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.185
					}
				}
				change_government_reform_progress = 19
			}
			else_if = {
				limit = {
					has_global_modifier_value = {
						which = reform_progress_growth
						value = 0.195
					}
				}
				change_government_reform_progress = 20
			}
		}
	}
	
	option = {
		name = FR_reform_repair_events.2.option.default
		ai_chance = { factor = 100 }
	}
}